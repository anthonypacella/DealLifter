export function identicon(t, e = 50, i = 50) {
    const n = t.split("").reduce(((t, e) => 16777619 * ((t ^ e.charCodeAt(0)) >>> 0)), 2166136261);
    return `<svg viewBox="-1.5 -1.5 8 8" xmlns="http://www.w3.org/2000/svg" fill="hsl(${n/16777619%18*20} ${e}% ${i}%)">${[...Array(t?25:0).keys()].map((t=>n%(16-t%15)<4?`<rect x="${t>14?7-~~(t/5):~~(t/5)}" y="${t%5}" width="1" height="1"/>`:"")).join("")}</svg>`
}

export const identiconSvg = window.customElements && customElements.define("identicon-svg", class extends HTMLElement {
    connectedCallback() {
        this.identiconSvg()
    }
    attributeChangedCallback() {
        this.identiconSvg()
    }
    static get observedAttributes() {
        return ["username"]
    }
    identiconSvg() {
        this.innerHTML = identicon(this.getAttribute("username"))
    }
});